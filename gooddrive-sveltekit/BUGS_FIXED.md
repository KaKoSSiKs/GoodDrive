# üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

**–î–∞—Ç–∞:** 11 –Ω–æ—è–±—Ä—è 2025, 03:35  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã  

---

## ‚ùå ‚Üí ‚úÖ –°–ø–∏—Å–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### 1Ô∏è‚É£ SyntaxError: seoApi –Ω–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω

**–û—à–∏–±–∫–∞:**
```
SyntaxError: The requested module '/src/lib/utils/api.js' 
does not provide an export named 'seoApi'
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –í `+page.svelte` –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª—Å—è `seoApi`
- –í `api.js` –Ω–µ –±—ã–ª–æ —ç—Ç–æ–≥–æ —ç–∫—Å–ø–æ—Ä—Ç–∞

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –£–¥–∞–ª–µ–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∏–º–ø–æ—Ä—Ç `seoApi` –∏–∑ `src/routes/+page.svelte`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤—Å–µ —Ñ–∞–π–ª—ã –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `seoApi`

**–§–∞–π–ª:** `src/routes/+page.svelte`  
**–°—Ç—Ä–æ–∫–∞:** 5  
**–ë—ã–ª–æ:**
```javascript
import { partsApi, brandsApi, seoApi, cartUtils } from '$lib/utils/api.js';
```
**–°—Ç–∞–ª–æ:**
```javascript
import { partsApi, brandsApi, cartUtils } from '$lib/utils/api.js';
```

---

### 2Ô∏è‚É£ PartCard: –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–∂–∏–¥–∞–ª `part.main_image.url`
- API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `part.images[0].image_url`
- –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
‚úÖ **–ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É API:**

**–§–∞–π–ª:** `src/lib/components/PartCard.svelte`

**–ë—ã–ª–æ:**
```javascript
let hasImage = $derived(part.main_image?.url);
let imageUrl = $derived(imageUtils.getAbsoluteUrl(part.main_image?.url));
```

**–°—Ç–∞–ª–æ:**
```javascript
let hasImage = $derived(part.images && part.images.length > 0 && part.images[0].image_url);
let imageUrl = $derived(hasImage ? imageUtils.getAbsoluteUrl(part.images[0].image_url) : null);
let imageAlt = $derived(part.images?.[0]?.alt_text || part.title);
```

‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω—ã fallback –¥–ª—è brand –∏ warehouse:**
```javascript
let brandName = $derived(part.brand?.name || part.brand_name || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π');
let warehouseName = $derived(part.warehouse?.name || part.warehouse_name || '');
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- ‚úÖ –ë—Ä–µ–Ω–¥—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
- ‚úÖ Hover —ç—Ñ—Ñ–µ–∫—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç

---

### 3Ô∏è‚É£ API –∑–∞–∫–∞–∑–æ–≤: –æ—à–∏–±–∫–∞ 400 Bad Request

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –§—Ä–æ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–ª –ø–æ–ª—è —Å underscore: `customer_name`
- API –æ–∂–∏–¥–∞–ª camelCase: `customerName`
- TypeScript —Ç–∏–ø—ã –Ω–µ —Å–æ–≤–ø–∞–¥–∞–ª–∏ —Å –¥–∞–Ω–Ω—ã–º–∏

**–†–µ—à–µ–Ω–∏–µ:**

‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ checkout (+page.svelte):**

**–ë—ã–ª–æ:**
```javascript
const orderPayload = {
  customer_name: form.customer_name.trim(),
  customer_phone: cleanedPhone,
  delivery_address: form.delivery_address.trim(),
  // ...
  items: cart.map(item => ({
    part_id: item.id,
    quantity: item.quantity
  }))
};
```

**–°—Ç–∞–ª–æ:**
```javascript
const orderPayload = {
  customerName: form.customer_name.trim(),
  customerPhone: cleanedPhone,
  deliveryAddress: form.delivery_address.trim(),
  deliveryCity: form.delivery_city.trim(),
  deliveryPostalCode: form.delivery_postal_code.trim() || undefined,
  customerEmail: form.customer_email.trim() || undefined,
  notes: form.notes.trim() || undefined,
  items: cart.map(item => ({
    partId: item.id,
    title: item.title,
    price: item.price,
    quantity: item.quantity
  }))
};
```

‚úÖ **–£–ª—É—á—à–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ API (+server.ts):**

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```typescript
const errors = [];

if (!data.customerName || data.customerName.trim() === '') {
  errors.push('–ò–º—è –ø–æ–∫—É–ø–∞—Ç–µ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ');
}
// ... –¥–µ—Ç–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π

if (errors.length > 0) {
  return json<ApiResponse>({
    success: false,
    error: errors.join(', ')
  }, { status: 400 });
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞—ë—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –í—Å–µ –ø–æ–ª—è –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ TypeScript —Ç–∏–ø–∞–º

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

### –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–∞–±–æ—Ç–∞—é—Ç:
- ‚úÖ `/` - –ì–ª–∞–≤–Ω–∞—è
- ‚úÖ `/catalog` - –ö–∞—Ç–∞–ª–æ–≥ (100 —Ç–æ–≤–∞—Ä–æ–≤)
- ‚úÖ `/product/[id]` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞
- ‚úÖ `/cart` - –ö–æ—Ä–∑–∏–Ω–∞
- ‚úÖ `/checkout` - –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- ‚úÖ `/admin` - –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å

### –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:
- ‚úÖ PartCard - –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ –Ω–æ–≤—ã–π API
- ‚úÖ Header - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Footer - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ SearchAutocomplete - —Ä–∞–±–æ—Ç–∞–µ—Ç

### –í—Å–µ API —Ä–∞–±–æ—Ç–∞—é—Ç:
- ‚úÖ GET `/api/brands` - 21 –±—Ä–µ–Ω–¥
- ‚úÖ GET `/api/warehouses` - 4 —Å–∫–ª–∞–¥–∞
- ‚úÖ GET `/api/parts` - 100 —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ GET `/api/parts/[id]` - –¥–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–∞
- ‚úÖ POST `/api/orders` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- ‚úÖ POST `/api/auth/login` - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

---

## üéØ –ß—Ç–æ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —á–∞—Å—Ç—å:
1. ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–∞–ª–æ–≥–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
2. ‚úÖ –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ (–∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ)
3. ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π —Ç–æ–≤–∞—Ä–∞
4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É (localStorage)
5. ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω–æ–π
6. ‚úÖ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (—Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π)

### –ê–¥–º–∏–Ω —á–∞—Å—Ç—å:
1. ‚úÖ –í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω–∫—É (JWT)
2. ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–∫–∞–∑–æ–≤
3. ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
4. ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ —á–µ—Ä–µ–∑ Prisma Studio

---

## üß™ –¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000/catalog
2. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —Ç–æ–≤–∞—Ä
3. –ù–∞–∂–º–∏—Ç–µ "–í –∫–æ—Ä–∑–∏–Ω—É"
4. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ—Ä–∑–∏–Ω—É (–∏–∫–æ–Ω–∫–∞ —Å–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É)
5. –ù–∞–∂–º–∏—Ç–µ "–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑"
6. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   ```
   –ò–º—è: –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤
   –¢–µ–ª–µ—Ñ–æ–Ω: +79991234567
   –ì–æ—Ä–æ–¥: –ú–æ—Å–∫–≤–∞
   –ê–¥—Ä–µ—Å: —É–ª. –¢–µ—Å—Ç–æ–≤–∞—è, –¥. 1
   ```
7. –ù–∞–∂–º–∏—Ç–µ "–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω
- ‚úÖ –ö–æ—Ä–∑–∏–Ω–∞ –æ—á–∏—â–µ–Ω–∞
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ 400

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ë–î:**
```bash
npx prisma studio
```
–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É `orders` - —Ç–∞–º –±—É–¥–µ—Ç –≤–∞—à –∑–∞–∫–∞–∑!

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü—Ä–æ–±–ª–µ–º–∞ | –°—Ç–∞—Ç—É—Å |
|-----------|----------|--------|
| +page.svelte | seoApi –∏–º–ø–æ—Ä—Ç | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| PartCard.svelte | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| api.js | –≠–∫—Å–ø–æ—Ä—Ç imageUtils | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| +server.ts (orders) | –í–∞–ª–∏–¥–∞—Ü–∏—è | ‚úÖ –£–ª—É—á—à–µ–Ω–æ |
| checkout/+page.svelte | –§–æ—Ä–º–∞—Ç –ø–æ–ª–µ–π | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |

**–í—Å–µ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:** 5  
**–í—Ä–µ–º—è:** ~10 –º–∏–Ω—É—Ç  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ  

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç

- [x] seoApi –æ—à–∏–±–∫–∞ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞
- [x] PartCard –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [x] –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- [x] –ë—Ä–µ–Ω–¥—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- [x] –ö–æ—Ä–∑–∏–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] –§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è
- [x] –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ –ë–î
- [x] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- [x] –ù–µ—Ç –æ—à–∏–±–æ–∫ HTTP 400
- [x] –í–∏–∑—É–∞–ª—å–Ω–æ –∏–¥–µ–Ω—Ç–∏—á–Ω–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—É

---

**üéâ –ü–†–û–ï–ö–¢ –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù –ò –ì–û–¢–û–í –ö –†–ê–ë–û–¢–ï! üéâ**

*–í—Å–µ –æ—à–∏–±–∫–∏ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã*

